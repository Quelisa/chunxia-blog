---
title: 我对时间实体mention的理解
date: 2021-01-06 16:40:04
tags:
- mention
- 时间实体
categories: 
- 实体识别
---

任务型对话中会话的推进主要依靠意图的识别和实体信息的收集。而实体识别目前在工业落地主要使用规则模板的方式来保证准确率，而且实体类别众多，每一类实体的mention要考虑的情况特别多，实现起来相对复杂，因此具有有很大的提升空间。
<!--more-->


### 实体识别和mention的关系
实体识别应用比较多的主要是关系抽取和对话理解。关系抽取主要是将抽取到的实体和关系进行匹配，所以主要对实体识别的准确率要求较高。而任务型对话除了要求高精度的实体识别外还要进行实体的mention。什么是实体mention呢？我自己的理解就是，比如用户访问：”我要明天到北京的机票“。这里的”明天“要被是被成一个时间的实体，这个实体的mention是具体的那一天比如明天是2021年5月12号，这里明天对应的mention就是2021年5月12号，这样对话机器人拿到这个实体的信息才是有意义的，它才可以通过查询拿到用户需要的信息并返回给用户。


### 时间实体识别的分类
目前主流的对于时间实体识别的分类主要分为date、time和duration。
1. date是日期，例如2021年5月1日
2. time是时间，例如12点58分
3. duration是一个时间单位的大小，比如5年、半个月、2两小时、十秒等


### 时间实体mention的挑战
1. 时间分类的多样性，比如时间点、时间段、时间周期
2. 时间的规则多样性，比如2月闰年29天，平年28天，节假日的规定不固定等，导致时间的校验困难
3. 时间的颗粒度控制，比如用户关系的是小时范围发生的事还是一天范围发生的事
4. 时间表达的多样性，比如3点15分可以表达为3点一刻，还比如昨天，过去两个小时等


### 时间实体mention的范围
mention的划分根据不同的维度有不同的分类，由于我们的场景的任务型问答场景，所以主要针对真实场景中遇到问题进行mention的划分，为后一步的mention抽取设计做好准备。下面可以举几个实际业务中的例子进行直观感受一下。

(1) 举例1：准确的时间描述  
user：我想预定今天下午2点的《功夫熊猫》   
bot： 好的，已为您预定2021年5月6号14:00:00的《功夫熊猫》  

(2) 举例2：准确的日期描述  
bot: 请问什么时候发货  
user: 后天  
bot: 好的，发货日期为2021年5月8号  

(3) 举例3：准确的时间段描述  
bot: 请问预定什么时间段呢？  
user: 今天上午10点到11点半  
bot: 已为您预定2021年5月6号10:00:00-2021年5月6号11:30:00的会议室  

(4) 举例4：准确日期段的描述  
bot: 请问举办日期段是？  
user: 2021年5月6号到2021年5月12号  
bot: 已为您预定2021年5月6号-2021年5月12号的举办场地  

(5) 举例5：通过推断的时间描述  
user: 15分钟后提醒我开会  
bot: 好的，已为您设置2021年5月5号14:15:00开会的闹钟  

(6) 举例6：通过推断的日期描述  
bot: 请问什么时候送达  
user: 母情节那天  
bot: 好的，我们将在2021年5月8号为您送达。  

(7) 举例7：通过推断的时间段描述  
bot：请问你需要订阅多久  
user：预定一个月  
bot: 好的，已为您开通2021年5月6号00:00:00-2021年6月6号00:00:00的超级会员  

(8) 举例8：通过推断的时间周期  
bot: 请问要例会安排在什么时候  
user: 每天早上10点  
bot: 已为您安排每天上午10:00:00的例会  

(9) 举例9：通过推断的时间周期  
bot: 请问要安排在哪几天  
user: 每周二和周三  
bot: keep为您在每周二、周三安排训练  


以上的mention主要将时间根据时间点和时间段进行一个大的分类，在时间点内根据时间颗粒度的不同又划分为日期和每日的时间。在这三个基本面上，根据时间的周期特性又可以延伸出周期时间点和周期时间段，根据人们日常表达中的口语特性又可以延伸出推测时间点和推测时间段。所以整体的mention类型划分如下：

1. 准确时间mention：一天内时间（time）、日期（date）和时间段（duration）以及日期时间段
2. 周期时间mention：每天的时间周期（cycle_time）、日期的周期（cycle_date）和时间段的周期（cycle_duration）
3. 推测时间mention：准确时间点+时间长度的（shift_time）、准确日期点+日期长度的（shift_date）和准确时间段+时间长度的（shift_duration）
4. 推测周期时间mention：每天的时间周期+时间长度的（cycle_shift_time）、日期的周期+日期长度的（cycle_shift_date）和时间段的周期+时间长度的（cycle_shift_duration）


### 设计遐想

在明确了mention分类后，其实已经有了整体的mention框架，mention的第一步无疑是进行时间实体的识别，识别的归类是date、time和duration，除了识别时间外还要识别。实体识别后要进行一步归一化处理，抽取出标准的表达，例如“2021年5月6日”识别为一个准确date的实体，具体归一化为一个标准的表达“2021年5月6号”。“明天”则识别为推测时间，在归一化时需要取得当前日期，在当前日期上进行时长运算得到标准的时间表达“2021年5月7日”。对于周期性的时间表达，如每周六等系统默认给出一个范围内的所有周六的计算方式。

### TODO
这是一个初步的设计的思路，后续有空补详细代码设计和代码实现。


